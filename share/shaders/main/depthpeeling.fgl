uniform sampler2D previousPass;
uniform float width;
uniform float height;
void main() {
	vec2 texCoord = vec2(gl_FragCoord.x / width, gl_FragCoord.y / height);
    float depth = texture2D(previousPass, texCoord).z;
     
     if (depth > gl_FragCoord.z  || abs(depth - gl_FragCoord.z) < .00000000000000001 || depth == 1.0 || depth == 0.0)
     	  discard;
     gl_FragDepth =  gl_FragCoord.z;
	 gl_FragColor= vec4(gl_Color.r, gl_Color.g, gl_Color.b, gl_Color.a);
}
