<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <meta content="text/html; charset=ISO-8859-1"
 http-equiv="content-type">
  <title>Field Line Advection Setup</title>
</head>
<body>
<div style="text-align: center;">
<h3 style="text-align: center;">How to Set Up Unsteady
Flow<br>
</h3>
</div>
<font size="+2">
<ol>
  <li> Load a Metadata file (*.vdf file) into VAPOR. </li>
  <li>In the Basic Flow Settings: 
    <ol>
      <li>Specify "Unsteady" as the
flow type </li>
      <li> Specify three variables for the unsteady
(e.g. velocity)
field</li>
      <li>Specify the
"Unsteady Integration Direction" as either "Forward" or
"Backward".&nbsp; Seeds will be advected in the specified
direction by integrating the unsteady field either forwards or
backwards in time.
        </li>
      <li>Specify the "Unsteady field scale
factor".&nbsp; (Normally with WRF datasets this factor is 1.)  This
depends on the space and time scales that were used when the data was
generated.&nbsp; It is the product:
(spatial-correction-factor)*(time-correction-factor), where:</li>
      <ul>
        <li>(time-correction-factor) is the number of
simulation time units (e.g. seconds) per vapor (.vdf) time step.  If
the user times are correctly specified in the metadata (vdf file) then this 
factor should be 1.
</li>
        <li>(spatial-correction-factor) is the ratio
of the full
domain size in VAPOR (see the VAPOR region panel) to the actual user
domain extents that were used in the simulation.  If the data extents in
the metadata (vdf file)
are correctly specified to the actual user coordinates, then this factor should be 1.</li>
      </ul>
    </ol>
    </li>
  <li>Set up flow seeding as follows:</li>
  <ol>
    <li>Decide whether to use a random rake, nonrandom
rake, or a
list of seeds, as the starting seeds for the field lines to be advected.</li>
    <ul>
      <li>If you are using a rake,&nbsp; the position
and size of
the rake can be established by using sliders, by typing in numerical
values, or by using the rake tool in the visualizer window.</li>
      <li>To use a list of seeds, either type it in
(using the
"edit seed list" button), read the seeds from a text file,
or insert them using the probe tool.&nbsp; Each
seed in the list has (x,y,z)-coordinates, as well as a time.&nbsp; If
the time is negative, that seed point is valid for all seed time steps.</li>
    </ul>
    <li>Under the "Unsteady Flow Time Settings", specify the time
steps when the seed points are to be
injected into the flow, using the three values labeled
"Seed time start, end, increment".&nbsp; These determine an increasing
sequence of integers evenly spaced in time, of the form: a, a+b,
a+2b,...,a+kb, where a is the "Seed Time
Start", b is the "increment" and the largest injection time, a+kb, is
no greater than the "Seed Time End".&nbsp; If the seeds are from a seed
list, and the seed time is nonnegative, then that seed is only injected
at its specified time step.</li>
    <li>In the Unsteady Flow Time Settings:</li>
    <ol>
      <li>Set the "Unsteady
samples per time step" to be the number of separate positions along a
path line that will be displayed in the interval from one time step to
the next.<span style="">&nbsp; </span>Increase this to get a smoother
path line.</li>
      <li class="MsoNormal" style="">&#8220;Display interval
min, max&#8221; determines the portion of each path that is displayed at a
given time.<span style="">&nbsp; </span>If T is the current time step
(as specified in the Animation Panel), then the portion of the flow
line from T+min to T+max will be displayed.<span style="">&nbsp; </span>For
example:</li>
      <ul>
        <li>&nbsp;To see the entire
path
line at once, make min
very negative and max very positive (e.g. -1000 and +1000).
          </li>
        <li>To see the path line evolve
(grow) over time, with the
unsteady integration = forward, set min to be very negative (e.g. min =
-1000)
and set max = 0. The animation panel can
later be used to animate the path line evolution.</li>
    
      </ul>
     
    </ol>
     <li>If the
unsteady field data is not available at every
time step, you must specify the time steps that will be sampled, using
the "Unsteady Flow Time Settings".&nbsp; By default, every
time step is sampled from beginning to end, using values in "Time step
sample start, end, increment".&nbsp; Check the optional "Use time step
list" to specify an arbitrary set of time steps that will be sampled.</li>
    <br>

  </ol>
  <div style="text-align: center;">
  <h3><big></big></h3>
     </div>
  <span
 style="font-weight: bold;">Nonuniform random seed
placement:</span><br>
&nbsp;&nbsp;&nbsp; If you are using the &#8220;Random Rake&#8221; for seed
placement, the distribution of random seeds can be biased by a field
magnitude using bias settings in the "Flow Seeding Settings".
&nbsp;&nbsp; As you increase the bias (above 0), the
seeds are chosen at larger field magnitude values, approaching the
maximum field magnitude within the rake bounds.&nbsp; Bias values below
zero result in seeds to be distributed with field magnitudes nearer
zero.&nbsp; The three variables labeled "Seed Distrib. Field" identify
the vector field whose magnitude is used to determine the seed
distribution.<br>
&nbsp;<br>
  <span style="font-weight: bold;">Color and opacity settings</span><br>
&nbsp;&nbsp;&nbsp; By default, path lines have a constant color and
opacity.&nbsp;&nbsp; Using the Color/Opacity mapping, you can make the
color and opacity depend on any of the following:
      <ul>
 <li>Time Step (i.e. the specific time step associated
with a particle as it moves along the path line)</li>
<li>Seed Index.&nbsp; The seeds are numbered from 0
to N-1
where N is the number of different seed points.&nbsp; If this option is
selected, each field line has color/opacity determined by its seed
point.</li>
    <li>&nbsp;Variable.&nbsp; The color and opacity is a
mapping of
an arbitrary variable at the position of the point in the current VAPOR
data collection.</li>
  </ul>
  When one of these
mappings is selected, be sure to
specify the
color
map endpoints to include the range of values to be
mapped.&nbsp; Then use the transfer function editor to
specify the color at the points along that range.
  <br>
  
</ol>
</font>
</body>
</html>
